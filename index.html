<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RevisionVault Pro 2.0 - Intelligent Academic Platform</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* ==================== CSS VARIABLES & RESET ==================== */
        :root {
            --primary: #1a2980;
            --secondary: #26d0ce;
            --accent: #ff4081;
            --success: #10b981;
            --warning: #f59e0b;
            --danger: #ef4444;
            --light: #f8fafc;
            --dark: #1e293b;
            --card-bg: #ffffff;
            --shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
            --shadow-lg: 0 20px 40px rgba(0,0,0,0.2);
            --radius: 16px;
            --radius-sm: 8px;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Inter', 'Segoe UI', system-ui, sans-serif;
        }

        body {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding-bottom: 100px;
        }

        /* ==================== ANIMATIONS ==================== */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes slideIn {
            from { transform: translateX(-100%); }
            to { transform: translateX(0); }
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        @keyframes shimmer {
            0% { background-position: -1000px 0; }
            100% { background-position: 1000px 0; }
        }

        /* ==================== CORE COMPONENTS ==================== */
        /* Header */
        .header-container {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 1000;
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            padding: 15px 20px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.15);
            backdrop-filter: blur(10px);
        }

        .header-content {
            max-width: 1400px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 20px;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 15px;
            flex-shrink: 0;
        }

        .logo-icon {
            background: rgba(255, 255, 255, 0.9);
            width: 45px;
            height: 45px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--primary);
            font-size: 22px;
            box-shadow: var(--shadow);
            animation: pulse 2s infinite;
        }

        .logo-text h1 {
            font-size: 22px;
            margin-bottom: 2px;
            font-weight: 800;
            letter-spacing: -0.5px;
            color: white;
        }

        .logo-text p {
            font-size: 12px;
            opacity: 0.9;
            font-weight: 400;
            color: rgba(255, 255, 255, 0.9);
        }

        /* Search System */
        .search-container {
            flex: 1;
            max-width: 600px;
            position: relative;
        }

        .search-box {
            width: 100%;
            padding: 14px 20px;
            padding-left: 45px;
            border: none;
            border-radius: 50px;
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(10px);
            color: white;
            font-size: 15px;
            font-weight: 500;
            transition: all 0.3s;
        }

        .search-box::placeholder {
            color: rgba(255, 255, 255, 0.8);
        }

        .search-box:focus {
            outline: none;
            background: rgba(255, 255, 255, 0.25);
            box-shadow: 0 0 0 3px rgba(255, 255, 255, 0.2);
        }

        .search-icon {
            position: absolute;
            left: 18px;
            top: 50%;
            transform: translateY(-50%);
            color: rgba(255, 255, 255, 0.9);
            font-size: 16px;
        }

        /* Main Container */
        .main-container {
            margin-top: 100px;
            max-width: 1400px;
            margin-left: auto;
            margin-right: auto;
            background: white;
            border-radius: var(--radius);
            overflow: hidden;
            box-shadow: var(--shadow-lg);
            min-height: calc(100vh - 180px);
        }

        /* Layout Grid */
        .main-layout {
            display: grid;
            grid-template-columns: 280px 1fr 320px;
            min-height: 600px;
        }

        /* Sidebars */
        .sidebar-left {
            background: var(--light);
            padding: 25px 20px;
            border-right: 1px solid #e2e8f0;
            overflow-y: auto;
            height: calc(100vh - 180px);
        }

        .sidebar-right {
            background: var(--light);
            padding: 25px 20px;
            border-left: 1px solid #e2e8f0;
            height: calc(100vh - 180px);
            overflow-y: auto;
        }

        /* Main Content */
        .main-content {
            padding: 25px;
            background: white;
            overflow-y: auto;
            height: calc(100vh - 180px);
        }

        /* Bottom Navigation */
        .bottom-nav {
            position: fixed;
            bottom: 50px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 50px;
            padding: 12px 25px;
            display: flex;
            gap: 10px;
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.25);
            z-index: 1000;
            border: 2px solid #e2e8f0;
            min-width: 580px;
            justify-content: space-around;
        }

        .nav-btn {
            background: none;
            border: none;
            padding: 12px 18px;
            border-radius: 30px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
            font-weight: 600;
            font-size: 13px;
            color: #64748b;
            transition: all 0.3s;
            min-width: 90px;
            justify-content: center;
        }

        .nav-btn.active {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            box-shadow: 0 8px 20px rgba(26, 41, 128, 0.3);
        }

        /* Cards */
        .card {
            background: var(--card-bg);
            border-radius: var(--radius);
            padding: 20px;
            box-shadow: var(--shadow);
            margin-bottom: 20px;
            border: 2px solid #e2e8f0;
            transition: all 0.3s;
        }

        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 30px rgba(0,0,0,0.1);
        }

        /* Material Cards */
        .material-card {
            background: var(--card-bg);
            border-radius: var(--radius);
            overflow: hidden;
            border: 2px solid #e2e8f0;
            transition: all 0.3s;
            position: relative;
            animation: fadeIn 0.5s ease-out;
        }

        .material-badge {
            position: absolute;
            top: 12px;
            left: 12px;
            background: linear-gradient(135deg, var(--accent), #f50057);
            color: white;
            padding: 6px 14px;
            border-radius: 50px;
            font-size: 10px;
            font-weight: 800;
            letter-spacing: 1px;
            z-index: 1;
        }

        .material-badge.trending {
            background: linear-gradient(135deg, var(--warning), #f97316);
        }

        .material-badge.recent {
            background: linear-gradient(135deg, var(--success), #059669);
        }

        .material-badge.premium {
            background: linear-gradient(135deg, #8b5cf6, #7c3aed);
        }

        /* Grids */
        .materials-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 35px;
        }

        .tools-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
            margin-bottom: 25px;
        }

        .university-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
        }

        /* Forms */
        .form-group {
            margin-bottom: 20px;
        }

        .form-label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #495057;
            font-size: 14px;
        }

        .form-input, .form-select {
            width: 100%;
            padding: 12px;
            border: 2px solid #e2e8f0;
            border-radius: var(--radius-sm);
            font-size: 14px;
            transition: all 0.3s;
        }

        .form-input:focus, .form-select:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(26, 41, 128, 0.1);
        }

        /* Buttons */
        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: var(--radius-sm);
            font-weight: 600;
            cursor: pointer;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            transition: all 0.3s;
            text-decoration: none;
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
        }

        .btn-success {
            background: linear-gradient(135deg, var(--success), #059669);
            color: white;
        }

        .btn-warning {
            background: linear-gradient(135deg, var(--warning), #f97316);
            color: white;
        }

        .btn-danger {
            background: linear-gradient(135deg, var(--danger), #dc2626);
            color: white;
        }

        .btn-accent {
            background: linear-gradient(135deg, var(--accent), #f50057);
            color: white;
        }

        /* Progress Bars */
        .progress-bar {
            height: 6px;
            background: #e2e8f0;
            border-radius: 3px;
            overflow: hidden;
            margin: 10px 0;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--primary), var(--secondary));
            border-radius: 3px;
            transition: width 0.3s ease;
        }

        /* Tabs */
        .tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            border-bottom: 2px solid #e2e8f0;
            padding-bottom: 10px;
        }

        .tab {
            padding: 10px 20px;
            background: none;
            border: none;
            border-bottom: 3px solid transparent;
            cursor: pointer;
            font-weight: 600;
            color: #64748b;
            transition: all 0.3s;
        }

        .tab.active {
            color: var(--primary);
            border-bottom-color: var(--primary);
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
            animation: fadeIn 0.5s ease-out;
        }

        /* Modals */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.95);
            z-index: 2000;
            padding: 0;
            animation: fadeIn 0.3s ease-out;
        }

        .modal.active {
            display: block;
        }

        .modal-content {
            background: white;
            border-radius: var(--radius);
            max-width: 800px;
            margin: 50px auto;
            max-height: 90vh;
            overflow: hidden;
            animation: slideIn 0.3s ease-out;
        }

        .modal-header {
            background: var(--primary);
            color: white;
            padding: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .modal-body {
            padding: 20px;
            overflow-y: auto;
            max-height: 70vh;
        }

        /* Notification System */
        .notification {
            position: fixed;
            top: 120px;
            right: 20px;
            background: white;
            padding: 15px;
            border-radius: var(--radius-sm);
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
            display: none;
            z-index: 2001;
            max-width: 300px;
            border-left: 5px solid var(--success);
            transform: translateX(400px);
            transition: transform 0.5s cubic-bezier(0.68, -0.55, 0.265, 1.55);
        }

        .notification.show {
            display: block;
            transform: translateX(0);
        }

        /* Status Badges */
        .status-badge {
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 700;
            display: inline-block;
        }

        .status-pending { background: #fef3c7; color: #92400e; }
        .status-approved { background: #d1fae5; color: #065f46; }
        .status-active { background: #dbeafe; color: #1e40af; }
        .status-expired { background: #fee2e2; color: #991b1b; }

        /* Loading States */
        .loading-spinner {
            width: 40px;
            height: 40px;
            border: 4px solid #f3f3f3;
            border-top: 4px solid var(--primary);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 20px auto;
        }

        .shimmer {
            background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);
            background-size: 1000px 100%;
            animation: shimmer 2s infinite;
        }

        /* ==================== FEATURE-SPECIFIC STYLES ==================== */
        /* SmartStudy Library */
        .intellisearch-results {
            background: white;
            border-radius: var(--radius-sm);
            box-shadow: var(--shadow);
            margin-top: 10px;
            max-height: 300px;
            overflow-y: auto;
            display: none;
        }

        .intellisearch-results.active {
            display: block;
        }

        /* Academic Toolkit */
        .studyflow-widget {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            border-radius: var(--radius);
            margin-bottom: 20px;
        }

        /* AI Assistant */
        .ai-assistant {
            position: fixed;
            bottom: 120px;
            right: 20px;
            width: 60px;
            height: 60px;
            background: linear-gradient(135deg, var(--accent), #f50057);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 24px;
            cursor: pointer;
            box-shadow: 0 8px 25px rgba(255, 64, 129, 0.3);
            z-index: 999;
            animation: pulse 2s infinite;
        }

        /* Watermark System */
        .watermark {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) rotate(-45deg);
            font-size: 120px;
            color: rgba(0,0,0,0.03);
            pointer-events: none;
            z-index: -1;
            white-space: nowrap;
            font-weight: 900;
        }

        /* Analytics Dashboard */
        .metric-card {
            background: white;
            border-radius: var(--radius);
            padding: 20px;
            text-align: center;
            border: 2px solid #e2e8f0;
            transition: all 0.3s;
        }

        .metric-value {
            font-size: 32px;
            font-weight: 800;
            margin: 10px 0;
            color: var(--primary);
        }

        .metric-label {
            font-size: 14px;
            color: #64748b;
        }

        /* Content Timeline */
        .timeline {
            position: relative;
            padding-left: 30px;
            margin: 20px 0;
        }

        .timeline::before {
            content: '';
            position: absolute;
            left: 10px;
            top: 0;
            bottom: 0;
            width: 2px;
            background: #e2e8f0;
        }

        .timeline-item {
            position: relative;
            margin-bottom: 20px;
            padding-bottom: 20px;
            border-bottom: 1px solid #e2e8f0;
        }

        .timeline-item::before {
            content: '';
            position: absolute;
            left: -23px;
            top: 5px;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: var(--primary);
        }

        /* Responsive Design */
        @media (max-width: 1200px) {
            .main-layout {
                grid-template-columns: 1fr;
            }
            .sidebar-left, .sidebar-right {
                display: none;
            }
        }

        @media (max-width: 768px) {
            .header-content {
                flex-direction: column;
                gap: 10px;
            }
            .search-container {
                width: 100%;
            }
            .main-container {
                margin-top: 140px;
            }
            .bottom-nav {
                min-width: 95%;
                bottom: 30px;
            }
            .materials-grid {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 480px) {
            .bottom-nav {
                padding: 8px 10px;
                min-width: 98%;
            }
            .nav-btn span {
                display: none;
            }
        }

        /* ==================== SPECIALIZED STYLES ==================== */
        /* PDF Viewer */
        .pdf-viewer {
            width: 100%;
            height: 100vh;
            background: #000;
            position: fixed;
            top: 0;
            left: 0;
            z-index: 2002;
        }

        /* Chat Interface */
        .chat-container {
            display: flex;
            flex-direction: column;
            height: 500px;
        }

        .chat-messages {
            flex: 1;
            overflow-y: auto;
            padding: 20px;
            background: #f8fafc;
            border-radius: var(--radius);
        }

        .chat-input {
            display: flex;
            gap: 10px;
            padding: 20px;
            background: white;
            border-top: 1px solid #e2e8f0;
        }

        /* Quiz System */
        .quiz-container {
            background: white;
            border-radius: var(--radius);
            padding: 30px;
            box-shadow: var(--shadow);
        }

        .quiz-question {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 20px;
            color: var(--dark);
        }

        .quiz-option {
            background: #f8fafc;
            border: 2px solid #e2e8f0;
            border-radius: var(--radius-sm);
            padding: 15px;
            margin-bottom: 10px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .quiz-option:hover {
            border-color: var(--primary);
            background: #e0f2fe;
        }

        .quiz-option.correct {
            background: #d1fae5;
            border-color: var(--success);
        }

        .quiz-option.incorrect {
            background: #fee2e2;
            border-color: var(--danger);
        }

        /* Flashcard System */
        .flashcard {
            width: 300px;
            height: 200px;
            perspective: 1000px;
            margin: 20px auto;
        }

        .flashcard-inner {
            position: relative;
            width: 100%;
            height: 100%;
            transform-style: preserve-3d;
            transition: transform 0.8s;
            cursor: pointer;
        }

        .flashcard.flipped .flashcard-inner {
            transform: rotateY(180deg);
        }

        .flashcard-front, .flashcard-back {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            background: white;
            border-radius: var(--radius);
            padding: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: var(--shadow);
            border: 2px solid #e2e8f0;
        }

        .flashcard-back {
            transform: rotateY(180deg);
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
        }

        /* Progress Visualization */
        .progress-ring {
            position: relative;
            width: 100px;
            height: 100px;
        }

        .progress-ring-circle {
            transform: rotate(-90deg);
            transform-origin: 50% 50%;
        }

        .progress-ring-text {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-weight: 700;
            font-size: 20px;
        }

        /* Enhanced Features */
        .feature-highlight {
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.1), rgba(255, 255, 255, 0.05));
            border: 2px solid rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(10px);
            border-radius: var(--radius);
            padding: 25px;
            margin-bottom: 20px;
        }

        .feature-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .feature-item {
            background: white;
            border-radius: var(--radius);
            padding: 20px;
            text-align: center;
            border: 2px solid #e2e8f0;
            transition: all 0.3s;
        }

        .feature-item:hover {
            transform: translateY(-5px);
            border-color: var(--primary);
            box-shadow: var(--shadow);
        }

        .feature-icon {
            font-size: 32px;
            color: var(--primary);
            margin-bottom: 15px;
        }

        .feature-name {
            font-weight: 700;
            color: var(--dark);
            margin-bottom: 10px;
        }

        .feature-desc {
            font-size: 13px;
            color: #64748b;
            line-height: 1.5;
        }

        /* Smart Filter System */
        .smart-filter {
            background: white;
            border-radius: var(--radius);
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: var(--shadow);
        }

        .filter-chips {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 15px;
        }

        .filter-chip {
            background: #e0f2fe;
            color: var(--primary);
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 13px;
            font-weight: 600;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 5px;
            transition: all 0.3s;
        }

        .filter-chip.active {
            background: var(--primary);
            color: white;
        }

        .filter-chip:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(26, 41, 128, 0.1);
        }

        /* Document Intelligence */
        .document-intelligence {
            background: linear-gradient(135deg, #f8fafc, #f1f5f9);
            border-radius: var(--radius);
            padding: 25px;
            margin-bottom: 30px;
        }

        .doc-metadata {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .metadata-item {
            background: white;
            padding: 15px;
            border-radius: var(--radius-sm);
            border-left: 4px solid var(--primary);
        }

        /* Collaboration Features */
        .collaboration-panel {
            background: white;
            border-radius: var(--radius);
            padding: 20px;
            box-shadow: var(--shadow);
            margin-bottom: 20px;
        }

        .collaborator-list {
            display: flex;
            gap: 10px;
            margin-top: 15px;
        }

        .collaborator {
            width: 40px;
            height: 40px;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 600;
            font-size: 14px;
        }

        /* Learning Path */
        .learning-path {
            position: relative;
            padding-left: 40px;
            margin: 30px 0;
        }

        .path-node {
            position: relative;
            padding: 20px;
            background: white;
            border-radius: var(--radius);
            margin-bottom: 30px;
            box-shadow: var(--shadow);
            border-left: 4px solid var(--success);
        }

        .path-node::before {
            content: '';
            position: absolute;
            left: -30px;
            top: 25px;
            width: 20px;
            height: 20px;
            background: var(--success);
            border-radius: 50%;
            border: 4px solid white;
            box-shadow: 0 0 0 2px var(--success);
        }

        /* Exam Simulation */
        .exam-simulator {
            background: white;
            border-radius: var(--radius);
            padding: 30px;
            box-shadow: var(--shadow);
        }

        .exam-timer {
            font-size: 24px;
            font-weight: 700;
            color: var(--primary);
            text-align: center;
            margin-bottom: 20px;
        }

        .exam-question-counter {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 2px solid #e2e8f0;
        }

        /* Gamification */
        .achievement-badge {
            width: 80px;
            height: 80px;
            background: linear-gradient(135deg, #f59e0b, #d97706);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 32px;
            margin: 0 auto 10px;
            box-shadow: 0 8px 20px rgba(245, 158, 11, 0.3);
        }

        /* Study Analytics */
        .analytics-chart {
            background: white;
            border-radius: var(--radius);
            padding: 20px;
            height: 300px;
            margin-bottom: 20px;
        }

        /* Content Scheduler */
        .scheduler {
            background: white;
            border-radius: var(--radius);
            padding: 20px;
            box-shadow: var(--shadow);
        }

        .schedule-item {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 15px;
            border-bottom: 1px solid #e2e8f0;
        }

        .schedule-time {
            background: #e0f2fe;
            padding: 8px 15px;
            border-radius: var(--radius-sm);
            font-weight: 600;
            color: var(--primary);
            min-width: 100px;
            text-align: center;
        }

        /* Version Control */
        .version-history {
            background: #f8fafc;
            border-radius: var(--radius);
            padding: 20px;
            max-height: 400px;
            overflow-y: auto;
        }

        .version-item {
            background: white;
            padding: 15px;
            border-radius: var(--radius-sm);
            margin-bottom: 10px;
            border-left: 4px solid #e2e8f0;
        }

        .version-item.active {
            border-left-color: var(--success);
        }

        /* Advanced Search */
        .advanced-search {
            background: white;
            border-radius: var(--radius);
            padding: 25px;
            box-shadow: var(--shadow);
            margin-bottom: 30px;
        }

        .search-filters {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        /* Content Moderation */
        .moderation-panel {
            background: white;
            border-radius: var(--radius);
            padding: 20px;
            box-shadow: var(--shadow);
            margin-bottom: 20px;
        }

        .moderation-queue {
            max-height: 500px;
            overflow-y: auto;
        }

        /* Revenue Analytics */
        .revenue-metrics {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .revenue-card {
            background: white;
            border-radius: var(--radius);
            padding: 20px;
            text-align: center;
            border-top: 4px solid var(--success);
        }

        /* Integration Panel */
        .integration-panel {
            background: white;
            border-radius: var(--radius);
            padding: 25px;
            box-shadow: var(--shadow);
        }

        .integration-list {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .integration-item {
            background: #f8fafc;
            padding: 20px;
            border-radius: var(--radius-sm);
            text-align: center;
            border: 2px solid #e2e8f0;
            transition: all 0.3s;
            cursor: pointer;
        }

        .integration-item:hover {
            border-color: var(--primary);
            transform: translateY(-3px);
        }

        /* Security Features */
        .security-badge {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            background: #d1fae5;
            color: #065f46;
            padding: 8px 15px;
            border-radius: 20px;
            font-size: 13px;
            font-weight: 600;
        }

        /* Accessibility Features */
        .accessibility-toolbar {
            position: fixed;
            bottom: 120px;
            left: 20px;
            background: white;
            border-radius: var(--radius);
            padding: 15px;
            box-shadow: var(--shadow);
            z-index: 999;
            display: flex;
            gap: 10px;
        }

        .accessibility-btn {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: #f8fafc;
            border: 2px solid #e2e8f0;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s;
        }

        .accessibility-btn:hover {
            background: var(--primary);
            color: white;
            border-color: var(--primary);
        }

        /* Dark Mode Support */
        .dark-mode {
            background: #1a1a1a;
            color: #ffffff;
        }

        .dark-mode .card,
        .dark-mode .material-card,
        .dark-mode .feature-item {
            background: #2d2d2d;
            border-color: #404040;
            color: #ffffff;
        }

        /* Print Styles */
        @media print {
            .no-print {
                display: none !important;
            }
            
            body {
                background: white !important;
                color: black !important;
            }
            
            .main-container {
                box-shadow: none !important;
                margin: 0 !important;
            }
        }

        /* PWA Installation Banner */
        .pwa-banner {
            position: fixed;
            bottom: 120px;
            left: 0;
            right: 0;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            padding: 15px 20px;
            display: none;
            z-index: 2000;
            box-shadow: 0 -4px 20px rgba(0,0,0,0.15);
        }

        .pwa-banner.show {
            display: block;
            animation: slideIn 0.5s ease-out;
        }

        /* Feature Tour */
        .feature-tour {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: white;
            border-radius: var(--radius);
            padding: 30px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            z-index: 3000;
            max-width: 500px;
            display: none;
        }

        .feature-tour.active {
            display: block;
            animation: fadeIn 0.3s ease-out;
        }

        /* Content Watermark */
        .content-watermark {
            position: relative;
        }

        .content-watermark::after {
            content: attr(data-watermark);
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) rotate(-45deg);
            font-size: 80px;
            color: rgba(0,0,0,0.1);
            pointer-events: none;
            z-index: 1;
            font-weight: 900;
            white-space: nowrap;
        }

        /* Study Session Timer */
        .study-timer {
            position: fixed;
            top: 100px;
            right: 20px;
            background: white;
            border-radius: var(--radius);
            padding: 15px;
            box-shadow: var(--shadow);
            z-index: 999;
            display: none;
        }

        .study-timer.active {
            display: block;
        }

        .timer-display {
            font-size: 24px;
            font-weight: 700;
            color: var(--primary);
            text-align: center;
            margin: 10px 0;
        }

        /* Smart Recommendations */
        .recommendation-engine {
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.9), rgba(255, 255, 255, 0.7));
            backdrop-filter: blur(10px);
            border-radius: var(--radius);
            padding: 25px;
            margin-bottom: 30px;
            border: 2px solid rgba(255, 255, 255, 0.3);
        }

        .recommendation-list {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        /* Content Quality Indicator */
        .quality-indicator {
            display: inline-flex;
            align-items: center;
            gap: 5px;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
        }

        .quality-excellent { background: #d1fae5; color: #065f46; }
        .quality-good { background: #dbeafe; color: #1e40af; }
        .quality-fair { background: #fef3c7; color: #92400e; }

        /* Batch Operations */
        .batch-operations {
            background: white;
            border-radius: var(--radius);
            padding: 25px;
            box-shadow: var(--shadow);
            margin-bottom: 30px;
        }

        .batch-progress {
            margin-top: 20px;
        }

        .progress-info {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
        }

        /* Cloud Sync Status */
        .cloud-status {
            position: fixed;
            bottom: 180px;
            right: 20px;
            background: var(--success);
            color: white;
            padding: 8px 15px;
            border-radius: 20px;
            font-size: 12px;
            display: flex;
            align-items: center;
            gap: 5px;
            z-index: 998;
            box-shadow: 0 4px 12px rgba(16, 185, 129, 0.3);
        }

        .cloud-status.offline {
            background: var(--danger);
        }

        /* AR/VR Preview */
        .arvr-preview {
            width: 100%;
            height: 300px;
            background: linear-gradient(135deg, #667eea, #764ba2);
            border-radius: var(--radius);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 24px;
            margin-bottom: 20px;
        }

        /* Blockchain Verification */
        .blockchain-badge {
            display: inline-flex;
            align-items: center;
            gap: 5px;
            background: linear-gradient(135deg, #8b5cf6, #7c3aed);
            color: white;
            padding: 6px 15px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
        }

        /* IoT Integration */
        .iot-device {
            background: white;
            border-radius: var(--radius);
            padding: 20px;
            text-align: center;
            border: 2px solid #e2e8f0;
            margin-bottom: 20px;
        }

        .iot-status {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            margin-top: 10px;
        }

        /* Career Path Tools */
        .career-path {
            background: linear-gradient(135deg, #f8fafc, #f1f5f9);
            border-radius: var(--radius);
            padding: 30px;
            margin-bottom: 30px;
        }

        .career-roadmap {
            display: flex;
            justify-content: space-between;
            margin-top: 30px;
            position: relative;
        }

        .career-roadmap::before {
            content: '';
            position: absolute;
            top: 20px;
            left: 0;
            right: 0;
            height: 2px;
            background: #e2e8f0;
            z-index: 1;
        }

        .career-stage {
            position: relative;
            z-index: 2;
            text-align: center;
            flex: 1;
        }

        /* Research Tools */
        .research-tools {
            background: white;
            border-radius: var(--radius);
            padding: 25px;
            box-shadow: var(--shadow);
        }

        .research-feature {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        /* Advanced Export */
        .export-options {
            background: white;
            border-radius: var(--radius);
            padding: 25px;
            box-shadow: var(--shadow);
            margin-bottom: 30px;
        }

        .export-format {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        /* Real-time Collaboration */
        .collaboration-session {
            background: white;
            border-radius: var(--radius);
            padding: 25px;
            box-shadow: var(--shadow);
            margin-bottom: 30px;
        }

        .session-info {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        /* Adaptive Learning */
        .adaptive-learning {
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.9), rgba(255, 255, 255, 0.7));
            backdrop-filter: blur(10px);
            border-radius: var(--radius);
            padding: 30px;
            margin-bottom: 30px;
        }

        .learning-pathway {
            margin-top: 20px;
        }

        /* Mobile Optimizations */
        .mobile-only {
            display: none;
        }

        @media (max-width: 768px) {
            .mobile-only {
                display: block;
            }
            
            .desktop-only {
                display: none;
            }
        }

        /* Performance Optimizations */
        .will-change {
            will-change: transform, opacity;
        }

        /* Print Optimization */
        @media print {
            * {
                background: white !important;
                color: black !important;
                box-shadow: none !important;
            }
            
            .main-container {
                margin: 0 !important;
                padding: 0 !important;
                box-shadow: none !important;
            }
        }

        /* High Contrast Mode */
        @media (prefers-contrast: high) {
            :root {
                --primary: #0000ff;
                --secondary: #00ffff;
                --accent: #ff00ff;
            }
        }

        /* Reduced Motion */
        @media (prefers-reduced-motion: reduce) {
            * {
                animation: none !important;
                transition: none !important;
            }
        }
    </style>
</head>
<body>
    <!-- Watermark System -->
    <div class="watermark" id="watermark">RevisionVault Pro 2.0</div>

    <!-- AI Assistant Floating Button -->
    <div class="ai-assistant" id="aiAssistant" onclick="openAIAssistant()">
        <i class="fas fa-robot"></i>
    </div>

    <!-- Study Timer -->
    <div class="study-timer" id="studyTimer">
        <div style="text-align: center; margin-bottom: 10px;">
            <i class="fas fa-clock"></i> Study Session
        </div>
        <div class="timer-display" id="timerDisplay">25:00</div>
        <div style="display: flex; gap: 10px; justify-content: center;">
            <button class="btn btn-primary btn-sm" onclick="startTimer()">Start</button>
            <button class="btn btn-danger btn-sm" onclick="stopTimer()">Stop</button>
        </div>
    </div>

    <!-- Cloud Sync Status -->
    <div class="cloud-status" id="cloudStatus">
        <i class="fas fa-cloud"></i>
        <span>Synced</span>
    </div>

    <!-- PWA Installation Banner -->
    <div class="pwa-banner" id="pwaBanner">
        <div style="display: flex; justify-content: space-between; align-items: center;">
            <div>
                <strong>Install RevisionVault Pro</strong>
                <p style="font-size: 12px; margin-top: 5px;">Get the app experience on your device</p>
            </div>
            <button class="btn btn-primary" onclick="installPWA()">Install</button>
        </div>
    </div>

    <!-- Accessibility Toolbar -->
    <div class="accessibility-toolbar" id="accessibilityToolbar">
        <button class="accessibility-btn" onclick="toggleDarkMode()" title="Toggle Dark Mode">
            <i class="fas fa-moon"></i>
        </button>
        <button class="accessibility-btn" onclick="increaseFontSize()" title="Increase Font Size">
            <i class="fas fa-text-height"></i>
        </button>
        <button class="accessibility-btn" onclick="decreaseFontSize()" title="Decrease Font Size">
            <i class="fas fa-text-width"></i>
        </button>
        <button class="accessibility-btn" onclick="toggleHighContrast()" title="High Contrast">
            <i class="fas fa-eye"></i>
        </button>
    </div>

    <!-- Fixed Header -->
    <div class="header-container">
        <div class="header-content">
            <div class="logo">
                <div class="logo-icon">
                    <i class="fas fa-graduation-cap"></i>
                </div>
                <div class="logo-text">
                    <h1>RevisionVault Pro 2.0</h1>
                    <p>Intelligent Academic Platform</p>
                </div>
            </div>
            
            <!-- IntelliSearch Pro -->
            <div class="search-container">
                <i class="fas fa-search search-icon"></i>
                <input type="text" class="search-box" placeholder="IntelliSearch: Search documents, topics, or ask questions..." id="intelliSearch">
                <div class="intellisearch-results" id="intelliSearchResults"></div>
            </div>
            
            <div class="header-actions">
                <div style="display: flex; gap: 15px; align-items: center;">
                    <!-- EduWallet Status -->
                    <div class="status-badge status-active" id="walletStatus">
                        <i class="fas fa-wallet"></i> Active
                    </div>
                    
                    <!-- Notification Bell -->
                    <div style="position: relative;">
                        <i class="fas fa-bell" style="color: white; font-size: 18px; cursor: pointer;" onclick="showNotifications()"></i>
                        <span class="badge" id="notificationBadge" style="display: none;"></span>
                    </div>
                    
                    <!-- User Profile -->
                    <div id="userProfile" style="display: none;">
                        <div style="width: 40px; height: 40px; background: rgba(255, 255, 255, 0.2); border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; cursor: pointer;" onclick="toggleUserMenu()">
                            <i class="fas fa-user"></i>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Main Container -->
    <div class="main-container" id="mainContainer">
        <!-- Main Layout Grid -->
        <div class="main-layout">
            <!-- Left Sidebar - SmartStudy Library & Academic Toolkit -->
            <aside class="sidebar-left">
                <!-- StudyFlow Planner -->
                <div class="card">
                    <h3 style="color: var(--primary); margin-bottom: 15px; display: flex; align-items: center; gap: 10px;">
                        <i class="fas fa-calendar-alt"></i> StudyFlow Planner
                    </h3>
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: 65%;"></div>
                    </div>
                    <div style="display: flex; justify-content: space-between; font-size: 12px; color: #64748b;">
                        <span>Today's Progress</span>
                        <span>65%</span>
                    </div>
                </div>

                <!-- Academic Toolkit -->
                <div class="card">
                    <h3 style="color: var(--primary); margin-bottom: 15px;">
                        <i class="fas fa-tools"></i> Academic Toolkit
                    </h3>
                    <div class="tools-grid">
                        <div class="tool-card" onclick="openTool('flashcards')">
                            <div class="tool-icon"><i class="fas fa-layer-group"></i></div>
                            <div class="tool-name">Flashcards</div>
                        </div>
                        <div class="tool-card" onclick="openTool('notes')">
                            <div class="tool-icon"><i class="fas fa-sticky-note"></i></div>
                            <div class="tool-name">Notes Pro</div>
                        </div>
                        <div class="tool-card" onclick="openTool('quiz')">
                            <div class="tool-icon"><i class="fas fa-question-circle"></i></div>
                            <div class="tool-name">Quiz Generator</div>
                        </div>
                        <div class="tool-card" onclick="openTool('scheduler')">
                            <div class="tool-icon"><i class="fas fa-clock"></i></div>
                            <div class="tool-name">ClassFlow</div>
                        </div>
                        <div class="tool-card" onclick="openTool('analytics')">
                            <div class="tool-icon"><i class="fas fa-chart-line"></i></div>
                            <div class="tool-name">Analytics</div>
                        </div>
                        <div class="tool-card" onclick="openTool('collaboration')">
                            <div class="tool-icon"><i class="fas fa-users"></i></div>
                            <div class="tool-name">Study Groups</div>
                        </div>
                    </div>
                </div>

                <!-- Revision Radar -->
                <div class="card">
                    <h3 style="color: var(--primary); margin-bottom: 15px;">
                        <i class="fas fa-bullseye"></i> Revision Radar
                    </h3>
                    <div id="revisionRecommendations">
                        <!-- AI recommendations will load here -->
                        <div class="recommendation-item">
                            <div style="font-weight: 600; color: var(--dark);">AGRO222</div>
                            <div style="font-size: 12px; color: #64748b;">Due for revision today</div>
                        </div>
                    </div>
                </div>

                <!-- Quick Access -->
                <div class="card">
                    <h3 style="color: var(--primary); margin-bottom: 15px;">
                        <i class="fas fa-bolt"></i> Quick Access
                    </h3>
                    <div class="quick-units" id="quickUnits"></div>
                </div>
            </aside>

            <!-- Main Content Area -->
            <main class="main-content">
                <!-- Tab Navigation -->
                <div class="tabs" id="mainTabs">
                    <button class="tab active" onclick="switchTab('dashboard')"><i class="fas fa-home"></i> Dashboard</button>
                    <button class="tab" onclick="switchTab('library')"><i class="fas fa-book"></i> SmartStudy Library</button>
                    <button class="tab" onclick="switchTab('network')"><i class="fas fa-network-wired"></i> UniConnect</button>
                    <button class="tab" onclick="switchTab('tools')"><i class="fas fa-wrench"></i> Tools</button>
                    <button class="tab" onclick="switchTab('collaborate')"><i class="fas fa-users"></i> Collaborate</button>
                    <button class="tab" onclick="switchTab('marketplace')"><i class="fas fa-store"></i> Marketplace</button>
                </div>

                <!-- Dashboard Tab -->
                <div id="dashboard" class="tab-content active">
                    <!-- Welcome Banner -->
                    <div class="feature-highlight">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
                            <div>
                                <h2 style="color: white;">Welcome to RevisionVault Pro 2.0</h2>
                                <p style="color: rgba(255, 255, 255, 0.9);">Your intelligent academic companion</p>
                            </div>
                            <div class="security-badge">
                                <i class="fas fa-shield-alt"></i> Security Level: High
                            </div>
                        </div>
                        
                        <!-- Quick Stats -->
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; margin-top: 20px;">
                            <div class="metric-card">
                                <div class="metric-value" id="totalMaterials">0</div>
                                <div class="metric-label">Study Materials</div>
                            </div>
                            <div class="metric-card">
                                <div class="metric-value" id="activeUsers">0</div>
                                <div class="metric-label">Active Users</div>
                            </div>
                            <div class="metric-card">
                                <div class="metric-value" id="studyHours">0</div>
                                <div class="metric-label">Study Hours</div>
                            </div>
                            <div class="metric-card">
                                <div class="metric-value" id="successRate">0%</div>
                                <div class="metric-label">Success Rate</div>
                            </div>
                        </div>
                    </div>

                    <!-- Smart Recommendations -->
                    <div class="recommendation-engine">
                        <h3 style="color: var(--primary); margin-bottom: 15px;">
                            <i class="fas fa-robot"></i> AI-Powered Recommendations
                        </h3>
                        <div class="recommendation-list" id="aiRecommendations"></div>
                    </div>

                    <!-- Recent Activity -->
                    <div class="card">
                        <h3 style="color: var(--primary); margin-bottom: 15px;">
                            <i class="fas fa-history"></i> Recent Activity
                        </h3>
                        <div class="timeline" id="activityTimeline"></div>
                    </div>

                    <!-- Trending Materials -->
                    <div class="card">
                        <h3 style="color: var(--primary); margin-bottom: 15px;">
                            <i class="fas fa-fire"></i> Trending Materials
                        </h3>
                        <div class="materials-grid" id="trendingGrid"></div>
                    </div>
                </div>

                <!-- SmartStudy Library Tab -->
                <div id="library" class="tab-content">
                    <!-- Library Header -->
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 25px;">
                        <h1 style="color: var(--primary);">
                            <i class="fas fa-book-open"></i> SmartStudy Library
                        </h1>
                        <div style="display: flex; gap: 10px;">
                            <button class="btn btn-primary" onclick="openDocumentUpload()">
                                <i class="fas fa-upload"></i> Upload
                            </button>
                            <button class="btn btn-success" onclick="openBulkUpload()">
                                <i class="fas fa-layer-group"></i> Bulk Upload
                            </button>
                        </div>
                    </div>

                    <!-- Smart Filter System -->
                    <div class="smart-filter">
                        <div style="display: flex; gap: 15px; align-items: center;">
                            <input type="text" class="form-input" placeholder="Search within library..." id="librarySearch" style="flex: 1;">
                            <select class="form-select" style="width: 150px;" id="universityFilter">
                                <option value="">All Universities</option>
                            </select>
                            <select class="form-select" style="width: 150px;" id="subjectFilter">
                                <option value="">All Subjects</option>
                            </select>
                            <button class="btn btn-primary" onclick="applyFilters()">
                                <i class="fas fa-filter"></i> Filter
                            </button>
                        </div>
                        
                        <div class="filter-chips" id="filterChips"></div>
                    </div>

                    <!-- Materials Grid -->
                    <div class="materials-grid" id="libraryGrid"></div>

                    <!-- Pagination -->
                    <div style="display: flex; justify-content: center; gap: 10px; margin-top: 30px;">
                        <button class="btn" onclick="loadMoreMaterials()">
                            <i class="fas fa-arrow-down"></i> Load More
                        </button>
                    </div>
                </div>

                <!-- UniConnect Tab -->
                <div id="network" class="tab-content">
                    <div class="card">
                        <h2 style="color: var(--primary); margin-bottom: 20px;">
                            <i class="fas fa-network-wired"></i> University Network System
                        </h2>
                        
                        <div class="university-grid" id="networkGrid"></div>
                        
                        <div style="margin-top: 20px;">
                            <button class="btn btn-primary" onclick="joinNetwork()">
                                <i class="fas fa-user-plus"></i> Join University Network
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Tools Tab -->
                <div id="tools" class="tab-content">
                    <div class="feature-grid">
                        <div class="feature-item" onclick="openTool('flashcards')">
                            <div class="feature-icon">
                                <i class="fas fa-layer-group"></i>
                            </div>
                            <div class="feature-name">FlashcardMaster Pro</div>
                            <div class="feature-desc">Intelligent flashcard system with spaced repetition</div>
                        </div>
                        
                        <div class="feature-item" onclick="openTool('quiz')">
                            <div class="feature-icon">
                                <i class="fas fa-question-circle"></i>
                            </div>
                            <div class="feature-name">ExamSim Pro</div>
                            <div class="feature-desc">Virtual exam environment with timed tests</div>
                        </div>
                        
                        <div class="feature-item" onclick="openTool('notes')">
                            <div class="feature-icon">
                                <i class="fas fa-sticky-note"></i>
                            </div>
                            <div class="feature-name">Noteworthy Pro</div>
                            <div class="feature-desc">Advanced note-taking with AI organization</div>
                        </div>
                        
                        <div class="feature-item" onclick="openTool('scheduler')">
                            <div class="feature-icon">
                                <i class="fas fa-calendar-alt"></i>
                            </div>
                            <div class="feature-name">ClassFlow Pro</div>
                            <div class="feature-desc">Intelligent timetable management</div>
                        </div>
                        
                        <div class="feature-item" onclick="openTool('analytics')">
                            <div class="feature-icon">
                                <i class="fas fa-chart-line"></i>
                            </div>
                            <div class="feature-name">ProgressAnalytics Pro</div>
                            <div class="feature-desc">Detailed performance tracking</div>
                        </div>
                        
                        <div class="feature-item" onclick="openTool('plagiarism')">
                            <div class="feature-icon">
                                <i class="fas fa-copyright"></i>
                            </div>
                            <div class="feature-name">PlagiarismGuard Pro</div>
                            <div class="feature-desc">Content originality verification</div>
                        </div>
                    </div>
                </div>

                <!-- More tabs content would continue here... -->
            </main>

            <!-- Right Sidebar - University Network & Quick Tools -->
            <aside class="sidebar-right">
                <!-- University Network -->
                <div class="card">
                    <h3 style="color: var(--primary); margin-bottom: 15px;">
                        <i class="fas fa-university"></i> CampusConnect
                    </h3>
                    <div class="university-grid" id="campusConnect"></div>
                </div>

                <!-- Premium Features -->
                <div class="card" style="background: linear-gradient(135deg, #8b5cf6, #7c3aed); color: white;">
                    <h3 style="margin-bottom: 15px;">
                        <i class="fas fa-crown"></i> Premium Access
                    </h3>
                    <p style="font-size: 14px; margin-bottom: 15px;">Unlock all AI tools and features</p>
                    <button class="btn" style="background: white; color: #8b5cf6; width: 100%;" onclick="upgradePremium()">
                        Upgrade Now
                    </button>
                </div>

                <!-- Quick Tools -->
                <div class="card">
                    <h3 style="color: var(--primary); margin-bottom: 15px;">
                        <i class="fas fa-bolt"></i> Quick Tools
                    </h3>
                    <div style="display: flex; flex-direction: column; gap: 10px;">
                        <button class="btn btn-primary" onclick="openDocumentUpload()">
                            <i class="fas fa-upload"></i> Upload Material
                        </button>
                        <button class="btn btn-success" onclick="startStudySession()">
                            <i class="fas fa-play"></i> Start Study Session
                        </button>
                        <button class="btn btn-warning" onclick="generateQuiz()">
                            <i class="fas fa-question"></i> Generate Quiz
                        </button>
                        <button class="btn btn-accent" onclick="openAIAssistant()">
                            <i class="fas fa-robot"></i> AI Assistant
                        </button>
                    </div>
                </div>

                <!-- Study Stats -->
                <div class="card">
                    <h3 style="color: var(--primary); margin-bottom: 15px;">
                        <i class="fas fa-chart-bar"></i> Study Statistics
                    </h3>
                    <div id="studyStats">
                        <!-- Stats will be loaded here -->
                    </div>
                </div>
            </aside>
        </div>

        <!-- Footer -->
        <footer class="footer" style="padding: 20px; text-align: center; color: #64748b; border-top: 1px solid #e2e8f0;">
            <p>&copy; 2025 RevisionVault Pro 2.0  All Rights Reserved</p>
            <p style="margin-top: 5px; font-size: 12px;">
                <span onclick="showPrivacyPolicy()" style="cursor: pointer; margin: 0 10px;">Privacy Policy</span> 
                <span onclick="showTerms()" style="cursor: pointer; margin: 0 10px;">Terms of Service</span> 
                <span onclick="showContact()" style="cursor: pointer; margin: 0 10px;">Contact Support</span>
            </p>
        </footer>
    </div>

    <!-- Bottom Navigation -->
    <div class="bottom-nav">
        <button class="nav-btn active" onclick="switchTab('dashboard')">
            <i class="fas fa-home"></i>
            <span>Dashboard</span>
        </button>
        <button class="nav-btn" onclick="switchTab('library')">
            <i class="fas fa-book"></i>
            <span>Library</span>
        </button>
        <button class="nav-btn" onclick="openDocumentUpload()">
            <i class="fas fa-upload"></i>
            <span>Upload</span>
        </button>
        <button class="nav-btn" onclick="openAIAssistant()">
            <i class="fas fa-robot"></i>
            <span>AI Assistant</span>
        </button>
        <button class="nav-btn" onclick="openUserMenu()">
            <i class="fas fa-user"></i>
            <span>Profile</span>
        </button>
    </div>

    <!-- ==================== MODALS ==================== -->
    <!-- AI Assistant Modal -->
    <div class="modal" id="aiAssistantModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 style="color: white;">
                    <i class="fas fa-robot"></i> StudyMate AI Assistant
                </h2>
                <button class="close-modal" onclick="closeModal('aiAssistantModal')">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="chat-container">
                    <div class="chat-messages" id="aiChatMessages"></div>
                    <div class="chat-input">
                        <input type="text" class="form-input" id="aiQuestion" placeholder="Ask me anything about your studies..." style="flex: 1;">
                        <button class="btn btn-primary" onclick="askAIQuestion()">
                            <i class="fas fa-paper-plane"></i>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Document Upload Modal -->
    <div class="modal" id="uploadModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 style="color: white;">
                    <i class="fas fa-upload"></i> Upload Study Material
                </h2>
                <button class="close-modal" onclick="closeModal('uploadModal')">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <!-- Upload form will be loaded here -->
                <div id="uploadFormContent"></div>
            </div>
        </div>
    </div>

    <!-- PDF Viewer Modal -->
    <div class="modal" id="pdfModal">
        <div class="modal-content" style="max-width: 100%; margin: 0; height: 100vh; border-radius: 0;">
            <div class="modal-header">
                <h2 style="color: white;" id="pdfTitle"></h2>
                <div style="display: flex; gap: 10px;">
                    <button class="btn btn-sm" onclick="downloadDocument()">
                        <i class="fas fa-download"></i>
                    </button>
                    <button class="close-modal" onclick="closeModal('pdfModal')">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
            </div>
            <div class="modal-body" style="padding: 0; height: calc(100vh - 70px);">
                <iframe id="pdfViewer" style="width: 100%; height: 100%; border: none;"></iframe>
            </div>
        </div>
    </div>

    <!-- Quiz Generator Modal -->
    <div class="modal" id="quizModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 style="color: white;">
                    <i class="fas fa-question-circle"></i> Quiz Generator
                </h2>
                <button class="close-modal" onclick="closeModal('quizModal')">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="quiz-container" id="quizContent"></div>
            </div>
        </div>
    </div>

    <!-- Flashcard Modal -->
    <div class="modal" id="flashcardModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 style="color: white;">
                    <i class="fas fa-layer-group"></i> Flashcard Master
                </h2>
                <button class="close-modal" onclick="closeModal('flashcardModal')">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="flashcard" id="flashcard" onclick="flipCard()">
                    <div class="flashcard-inner">
                        <div class="flashcard-front" id="cardFront"></div>
                        <div class="flashcard-back" id="cardBack"></div>
                    </div>
                </div>
                <div style="text-align: center; margin-top: 20px;">
                    <button class="btn btn-primary" onclick="nextCard()">Next Card</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Notification System -->
    <div class="notification" id="notification">
        <div style="display: flex; justify-content: space-between; align-items: start;">
            <div>
                <strong id="notificationTitle"></strong>
                <p id="notificationMessage"></p>
            </div>
            <button onclick="hideNotification()" style="background: none; border: none; color: #6c757d; cursor: pointer;">
                <i class="fas fa-times"></i>
            </button>
        </div>
    </div>

    <!-- Feature Tour Modal -->
    <div class="feature-tour" id="featureTour">
        <h2 style="color: var(--primary); margin-bottom: 15px;">Welcome to RevisionVault Pro 2.0!</h2>
        <div id="tourContent"></div>
        <div style="display: flex; justify-content: space-between; margin-top: 20px;">
            <button class="btn" onclick="skipTour()">Skip Tour</button>
            <button class="btn btn-primary" onclick="nextTourStep()">Next</button>
        </div>
    </div>

    <script>
        // ==================== COMPREHENSIVE APP STATE ====================
        const RevisionVault = {
            // Core State
            version: '2.0',
            user: JSON.parse(localStorage.getItem('rvp_user')) || null,
            session: JSON.parse(localStorage.getItem('rvp_session')) || { id: Date.now() },
            
            // Data Stores
            documents: JSON.parse(localStorage.getItem('rvp_documents')) || [],
            universities: JSON.parse(localStorage.getItem('rvp_universities')) || [],
            categories: JSON.parse(localStorage.getItem('rvp_categories')) || [],
            users: JSON.parse(localStorage.getItem('rvp_users')) || [],
            uploads: JSON.parse(localStorage.getItem('rvp_uploads')) || [],
            
            // AI & Learning Data
            aiKnowledge: JSON.parse(localStorage.getItem('rvp_ai_knowledge')) || {},
            studyProgress: JSON.parse(localStorage.getItem('rvp_study_progress')) || {},
            recommendations: JSON.parse(localStorage.getItem('rvp_recommendations')) || [],
            
            // Settings & Configuration
            settings: JSON.parse(localStorage.getItem('rvp_settings')) || {
                theme: 'light',
                fontSize: 'medium',
                notifications: true,
                autoSave: true,
                cloudSync: true,
                aiEnabled: true,
                accessibility: {
                    highContrast: false,
                    reducedMotion: false
                }
            },
            
            // Analytics & Metrics
            analytics: JSON.parse(localStorage.getItem('rvp_analytics')) || {
                totalSessions: 0,
                studyHours: 0,
                documentsViewed: 0,
                quizzesTaken: 0,
                flashcardsReviewed: 0,
                userEngagement: {},
                performanceMetrics: {}
            },
            
            // System State
            currentView: 'dashboard',
            searchResults: [],
            filters: {},
            selectedDocument: null,
            activeTool: null,
            
            // Timers & Sessions
            studyTimer: {
                active: false,
                startTime: null,
                duration: 25 * 60 * 1000, // 25 minutes
                remaining: 25 * 60 * 1000
            },
            
            // Cloud Sync
            cloud: {
                enabled: true,
                lastSync: null,
                pendingChanges: [],
                offlineQueue: []
            },
            
            // Cache
            cache: {
                materials: {},
                universities: {},
                search: {}
            }
        };

        // ==================== CORE INITIALIZATION ====================
        document.addEventListener('DOMContentLoaded', function() {
            initializeApp();
            loadDashboard();
            setupEventListeners();
            checkFirstTimeUser();
            startBackgroundServices();
        });

        async function initializeApp() {
            showLoading('Initializing RevisionVault Pro 2.0...');
            
            // Load initial data
            await Promise.all([
                loadDocuments(),
                loadUniversities(),
                loadCategories(),
                syncWithCloud(),
                initializeAI(),
                loadUserProgress()
            ]);
            
            // Initialize components
            initializeSearch();
            initializeFilters();
            initializeNotifications();
            initializeAccessibility();
            
            // Setup service workers for PWA
            if ('serviceWorker' in navigator) {
                navigator.serviceWorker.register('/sw.js').catch(console.error);
            }
            
            // Check for updates
            checkForUpdates();
            
            hideLoading();
            
            // Show welcome notification
            showNotification('Welcome', 'RevisionVault Pro 2.0 is ready!', 'success');
        }

        // ==================== SMART STUDY LIBRARY ====================
        async function loadDocuments() {
            try {
                // Load from localStorage or API
                const docs = JSON.parse(localStorage.getItem('rvp_documents')) || [];
                
                if (docs.length === 0) {
                    // Load sample data
                    await loadSampleDocuments();
                } else {
                    RevisionVault.documents = docs;
                }
                
                updateDocumentCount();
                renderMaterialsGrid();
            } catch (error) {
                console.error('Error loading documents:', error);
                showNotification('Error', 'Failed to load documents', 'error');
            }
        }

        async function loadSampleDocuments() {
            const sampleDocs = [
                {
                    id: 'doc_001',
                    title: 'Plant Breeding Notes',
                    code: 'AGRO222',
                    university: 'Egerton University',
                    type: 'pdf',
                    subject: 'Agronomy',
                    year: '2',
                    description: 'Comprehensive lecture notes on plant breeding techniques',
                    url: 'https://drive.google.com/file/d/17CG_rb_ecvnkLfjTzNC31u55pBR_RW70/preview',
                    trending: true,
                    recent: true,
                    premium: false,
                    metadata: {
                        pages: 45,
                        size: '2.4MB',
                        uploaded: '2024-01-15',
                        rating: 4.8,
                        downloads: 1245
                    }
                },
                // Add more sample documents...
            ];
            
            RevisionVault.documents = sampleDocs;
            localStorage.setItem('rvp_documents', JSON.stringify(sampleDocs));
        }

        function renderMaterialsGrid() {
            const grid = document.getElementById('libraryGrid');
            if (!grid) return;
            
            grid.innerHTML = RevisionVault.documents.map(doc => createMaterialCard(doc)).join('');
        }

        function createMaterialCard(doc) {
            const hasAccess = RevisionVault.user?.subscription?.active || !doc.premium;
            
            return `
                <div class="material-card" data-id="${doc.id}">
                    ${doc.trending ? '<div class="material-badge trending">TRENDING</div>' : ''}
                    ${doc.recent ? '<div class="material-badge recent">RECENT</div>' : ''}
                    ${doc.premium ? '<div class="material-badge premium">PREMIUM</div>' : ''}
                    
                    <div class="material-image" style="background: linear-gradient(135deg, var(--primary), var(--secondary));">
                        <i class="fas fa-${getDocIcon(doc.type)}" style="color: rgba(255,255,255,0.2); font-size: 60px;"></i>
                    </div>
                    
                    <div class="material-content">
                        <h3 class="material-title">${doc.title}</h3>
                        
                        <div class="material-meta">
                            <span class="material-code">${doc.code}</span>
                            <span class="material-year">Year ${doc.year}</span>
                        </div>
                        
                        <div class="material-info">
                            <i class="fas fa-university"></i>
                            <span>${doc.university}</span>
                            <span style="margin-left: auto; font-size: 11px;">
                                <i class="fas fa-book"></i> ${doc.subject}
                            </span>
                        </div>
                        
                        <p class="material-description">${doc.description}</p>
                        
                        <div class="material-metadata">
                            <span><i class="fas fa-download"></i> ${doc.metadata?.downloads || 0}</span>
                            <span><i class="fas fa-star"></i> ${doc.metadata?.rating || 'N/A'}</span>
                            <span><i class="fas fa-file"></i> ${doc.metadata?.pages || '?'} pages</span>
                        </div>
                        
                        <div class="material-actions">
                            ${hasAccess ? 
                                `<button class="btn btn-primary" onclick="viewDocument('${doc.id}')">
                                    <i class="fas fa-eye"></i> View
                                </button>` :
                                `<button class="btn btn-warning" onclick="upgradeForAccess('${doc.id}')">
                                    <i class="fas fa-lock"></i> Premium
                                </button>`
                            }
                            <button class="btn" onclick="addToStudyList('${doc.id}')">
                                <i class="fas fa-plus"></i> Save
                            </button>
                        </div>
                    </div>
                </div>
            `;
        }

        // ==================== INTELLISEARCH PRO ====================
        function initializeSearch() {
            const searchInput = document.getElementById('intelliSearch');
            const resultsDiv = document.getElementById('intelliSearchResults');
            
            searchInput.addEventListener('input', debounce(async function(e) {
                const query = e.target.value.trim();
                
                if (query.length < 2) {
                    resultsDiv.classList.remove('active');
                    return;
                }
                
                const results = await performIntelliSearch(query);
                displaySearchResults(results);
                resultsDiv.classList.add('active');
            }, 300));
            
            // Close results when clicking outside
            document.addEventListener('click', function(e) {
                if (!e.target.closest('.search-container')) {
                    resultsDiv.classList.remove('active');
                }
            });
        }

        async function performIntelliSearch(query) {
            try {
                // Semantic search implementation
                const results = {
                    documents: searchDocuments(query),
                    topics: searchTopics(query),
                    questions: searchQuestions(query),
                    users: searchUsers(query),
                    universities: searchUniversities(query)
                };
                
                // Combine and rank results
                const rankedResults = rankSearchResults(results, query);
                
                // AI-powered suggestions
                if (RevisionVault.settings.aiEnabled) {
                    const aiSuggestions = await getAISearchSuggestions(query);
                    rankedResults.suggestions = aiSuggestions;
                }
                
                return rankedResults;
            } catch (error) {
                console.error('Search error:', error);
                return { documents: [], suggestions: [] };
            }
        }

        function searchDocuments(query) {
            query = query.toLowerCase();
            return RevisionVault.documents.filter(doc => 
                doc.title.toLowerCase().includes(query) ||
                doc.code.toLowerCase().includes(query) ||
                doc.description.toLowerCase().includes(query) ||
                doc.subject.toLowerCase().includes(query) ||
                doc.university.toLowerCase().includes(query)
            ).slice(0, 10);
        }

        // ==================== AI ASSISTANT ====================
        function openAIAssistant() {
            openModal('aiAssistantModal');
            loadAIChat();
        }

        async function askAIQuestion() {
            const input = document.getElementById('aiQuestion');
            const question = input.value.trim();
            
            if (!question) return;
            
            // Add user message
            addChatMessage('user', question);
            input.value = '';
            
            // Show typing indicator
            showTypingIndicator();
            
            try {
                // Get AI response
                const response = await getAIResponse(question);
                
                // Remove typing indicator and add response
                removeTypingIndicator();
                addChatMessage('ai', response);
                
                // Update AI knowledge
                updateAIKnowledge(question, response);
            } catch (error) {
                removeTypingIndicator();
                addChatMessage('ai', "I'm having trouble connecting. Please try again.");
                console.error('AI error:', error);
            }
        }

        async function getAIResponse(question) {
            // This would connect to your AI backend
            // For now, using simulated responses
            
            const responses = {
                study: [
                    "Based on your study patterns, I recommend focusing on these topics first...",
                    "I suggest using spaced repetition for better retention. Let me create a schedule...",
                    "Here are some key concepts you should understand for this subject..."
                ],
                research: [
                    "For your research, consider these academic databases and sources...",
                    "Based on your topic, here are some relevant journals and papers...",
                    "I can help you structure your research paper. Start with..."
                ],
                general: [
                    "I'm here to help with your academic needs. What specific area do you need assistance with?",
                    "That's an interesting question! Let me analyze the best approach...",
                    "Based on my knowledge database, here's what I can tell you..."
                ]
            };
            
            // Simple intent detection
            let category = 'general';
            if (question.toLowerCase().includes('study') || question.toLowerCase().includes('learn')) {
                category = 'study';
            } else if (question.toLowerCase().includes('research') || question.toLowerCase().includes('paper')) {
                category = 'research';
            }
            
            const categoryResponses = responses[category];
            return categoryResponses[Math.floor(Math.random() * categoryResponses.length)];
        }

        // ==================== DOCUMENT MANAGEMENT ====================
        function openDocumentUpload() {
            openModal('uploadModal');
            loadUploadForm();
        }

        function loadUploadForm() {
            const formContent = `
                <div class="upload-form">
                    <div class="form-group">
                        <label class="form-label">Document Title</label>
                        <input type="text" class="form-input" id="uploadTitle" placeholder="Enter document title">
                    </div>
                    
                    <div class="form-row" style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-bottom: 20px;">
                        <div class="form-group">
                            <label class="form-label">Unit Code</label>
                            <input type="text" class="form-input" id="uploadCode" placeholder="e.g., AGRO222">
                        </div>
                        <div class="form-group">
                            <label class="form-label">University</label>
                            <select class="form-select" id="uploadUniversity">
                                <option value="">Select University</option>
                                ${RevisionVault.universities.map(uni => 
                                    `<option value="${uni.id}">${uni.name}</option>`
                                ).join('')}
                            </select>
                        </div>
                    </div>
                    
                    <div class="form-row" style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-bottom: 20px;">
                        <div class="form-group">
                            <label class="form-label">Subject/Category</label>
                            <input type="text" class="form-input" id="uploadSubject" placeholder="e.g., Agronomy">
                        </div>
                        <div class="form-group">
                            <label class="form-label">Year of Study</label>
                            <select class="form-select" id="uploadYear">
                                <option value="">Select Year</option>
                                <option value="1">Year 1</option>
                                <option value="2">Year 2</option>
                                <option value="3">Year 3</option>
                                <option value="4">Year 4</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Description</label>
                        <textarea class="form-input" id="uploadDescription" rows="3" placeholder="Brief description of the material"></textarea>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Document URL</label>
                        <input type="url" class="form-input" id="uploadURL" placeholder="https://drive.google.com/file/d/.../preview">
                        <small style="color: #64748b; font-size: 12px;">Must be a direct preview link ending with /preview</small>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Document Type</label>
                        <select class="form-select" id="uploadType">
                            <option value="pdf">PDF Document</option>
                            <option value="doc">Word Document</option>
                            <option value="ppt">PowerPoint</option>
                            <option value="video">Video</option>
                            <option value="audio">Audio</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">
                            <input type="checkbox" id="uploadPremium"> Premium Content (Requires subscription)
                        </label>
                    </div>
                    
                    <div style="display: flex; gap: 10px; margin-top: 30px;">
                        <button class="btn btn-primary" onclick="submitUpload()" style="flex: 2;">
                            <i class="fas fa-upload"></i> Upload Document
                        </button>
                        <button class="btn" onclick="closeModal('uploadModal')" style="flex: 1;">
                            Cancel
                        </button>
                    </div>
                </div>
            `;
            
            document.getElementById('uploadFormContent').innerHTML = formContent;
        }

        async function submitUpload() {
            // Get form values
            const title = document.getElementById('uploadTitle').value.trim();
            const code = document.getElementById('uploadCode').value.trim();
            const university = document.getElementById('uploadUniversity').value;
            const subject = document.getElementById('uploadSubject').value.trim();
            const year = document.getElementById('uploadYear').value;
            const description = document.getElementById('uploadDescription').value.trim();
            const url = document.getElementById('uploadURL').value.trim();
            const type = document.getElementById('uploadType').value;
            const premium = document.getElementById('uploadPremium').checked;
            
            // Validation
            if (!title || !code || !university || !subject || !year || !description || !url) {
                showNotification('Error', 'Please fill in all required fields', 'error');
                return;
            }
            
            // Create document object
            const document = {
                id: 'doc_' + Date.now(),
                title,
                code,
                university,
                subject,
                year,
                description,
                url,
                type,
                premium,
                metadata: {
                    uploaded: new Date().toISOString(),
                    uploadedBy: RevisionVault.user?.id || 'anonymous',
                    downloads: 0,
                    rating: 0,
                    pages: 0
                },
                trending: false,
                recent: true
            };
            
            // Add to documents
            RevisionVault.documents.unshift(document);
            
            // Save to localStorage
            localStorage.setItem('rvp_documents', JSON.stringify(RevisionVault.documents));
            
            // Sync to cloud if enabled
            if (RevisionVault.cloud.enabled) {
                await syncDocumentToCloud(document);
            }
            
            // Show success
            showNotification('Success', 'Document uploaded successfully!', 'success');
            
            // Close modal
            closeModal('uploadModal');
            
            // Refresh display
            renderMaterialsGrid();
            updateDocumentCount();
        }

        // ==================== STUDY TOOLS ====================
        function openTool(tool) {
            RevisionVault.activeTool = tool;
            
            switch(tool) {
                case 'flashcards':
                    openFlashcardSystem();
                    break;
                case 'quiz':
                    openQuizGenerator();
                    break;
                case 'notes':
                    openNoteTaking();
                    break;
                case 'scheduler':
                    openScheduler();
                    break;
                case 'analytics':
                    openAnalytics();
                    break;
                case 'collaboration':
                    openCollaboration();
                    break;
            }
        }

        function openFlashcardSystem() {
            openModal('flashcardModal');
            
            // Load flashcards
            const flashcards = RevisionVault.studyProgress.flashcards || [
                { front: 'What is photosynthesis?', back: 'The process by which plants convert light energy into chemical energy.' },
                { front: 'Define osmosis', back: 'The movement of water molecules through a semi-permeable membrane.' }
            ];
            
            RevisionVault.currentFlashcards = flashcards;
            RevisionVault.currentCardIndex = 0;
            
            showFlashcard(0);
        }

        function showFlashcard(index) {
            const card = RevisionVault.currentFlashcards[index];
            if (!card) return;
            
            document.getElementById('cardFront').textContent = card.front;
            document.getElementById('cardBack').textContent = card.back;
            
            // Reset card to front
            document.getElementById('flashcard').classList.remove('flipped');
        }

        function flipCard() {
            document.getElementById('flashcard').classList.toggle('flipped');
        }

        function nextCard() {
            RevisionVault.currentCardIndex++;
            if (RevisionVault.currentCardIndex >= RevisionVault.currentFlashcards.length) {
                RevisionVault.currentCardIndex = 0;
            }
            showFlashcard(RevisionVault.currentCardIndex);
        }

        // ==================== UNIVERSITY NETWORK ====================
        async function loadUniversities() {
            try {
                const universities = JSON.parse(localStorage.getItem('rvp_universities')) || [];
                
                if (universities.length === 0) {
                    // Load sample universities
                    await loadSampleUniversities();
                } else {
                    RevisionVault.universities = universities;
                }
                
                renderUniversityNetwork();
            } catch (error) {
                console.error('Error loading universities:', error);
            }
        }

        async function loadSampleUniversities() {
            const sampleUnis = [
                {
                    id: 'uni_001',
                    name: 'University of Nairobi',
                    code: 'UON',
                    students: 85000,
                    materials: 1245,
                    status: 'active',
                    joined: '2023-01-15'
                },
                {
                    id: 'uni_002',
                    name: 'Kenyatta University',
                    code: 'KU',
                    students: 65000,
                    materials: 890,
                    status: 'active',
                    joined: '2023-02-20'
                },
                // Add more universities...
            ];
            
            RevisionVault.universities = sampleUnis;
            localStorage.setItem('rvp_universities', JSON.stringify(sampleUnis));
        }

        function renderUniversityNetwork() {
            const grid = document.getElementById('networkGrid');
            if (!grid) return;
            
            grid.innerHTML = RevisionVault.universities.map(uni => `
                <div class="university-card">
                    <div class="university-logo">${uni.code}</div>
                    <h4>${uni.name}</h4>
                    <div class="university-stats">
                        <span><i class="fas fa-users"></i> ${uni.students.toLocaleString()}</span>
                        <span><i class="fas fa-book"></i> ${uni.materials}</span>
                    </div>
                    <button class="btn btn-primary" onclick="viewUniversity('${uni.id}')">
                        Explore
                    </button>
                </div>
            `).join('');
        }

        // ==================== ANALYTICS & DASHBOARD ====================
        function updateDocumentCount() {
            const count = RevisionVault.documents.length;
            document.getElementById('totalMaterials').textContent = count.toLocaleString();
            
            // Update analytics
            RevisionVault.analytics.totalDocuments = count;
            saveAnalytics();
        }

        function loadDashboard() {
            updateDashboardMetrics();
            loadTrendingMaterials();
            loadRecentActivity();
            loadAIRecommendations();
        }

        function updateDashboardMetrics() {
            // Update all metrics
            updateDocumentCount();
            updateActiveUsers();
            updateStudyHours();
            updateSuccessRate();
        }

        function updateActiveUsers() {
            // This would come from backend API
            const count = RevisionVault.users.length || 12500;
            document.getElementById('activeUsers').textContent = count.toLocaleString();
        }

        function updateStudyHours() {
            const hours = RevisionVault.analytics.studyHours || 0;
            document.getElementById('studyHours').textContent = hours.toLocaleString();
        }

        function updateSuccessRate() {
            const rate = RevisionVault.analytics.successRate || '85%';
            document.getElementById('successRate').textContent = rate;
        }

        // ==================== NOTIFICATION SYSTEM ====================
        function initializeNotifications() {
            // Request permission
            if ('Notification' in window && Notification.permission === 'default') {
                Notification.requestPermission();
            }
            
            // Load existing notifications
            loadNotifications();
        }

        function showNotification(title, message, type = 'info') {
            const notification = document.getElementById('notification');
            const titleEl = document.getElementById('notificationTitle');
            const messageEl = document.getElementById('notificationMessage');
            
            // Set colors based on type
            switch(type) {
                case 'success':
                    notification.style.borderLeftColor = '#10b981';
                    break;
                case 'error':
                    notification.style.borderLeftColor = '#ef4444';
                    break;
                case 'warning':
                    notification.style.borderLeftColor = '#f59e0b';
                    break;
                case 'info':
                default:
                    notification.style.borderLeftColor = '#3b82f6';
            }
            
            titleEl.textContent = title;
            messageEl.textContent = message;
            
            notification.classList.add('show');
            
            // Browser notification
            if (Notification.permission === 'granted') {
                new Notification(title, { body: message });
            }
            
            // Auto hide
            setTimeout(() => {
                notification.classList.remove('show');
            }, 5000);
        }

        // ==================== ACCESSIBILITY FEATURES ====================
        function initializeAccessibility() {
            // Load saved settings
            if (RevisionVault.settings.theme === 'dark') {
                enableDarkMode();
            }
            
            if (RevisionVault.settings.accessibility.highContrast) {
                enableHighContrast();
            }
            
            // Set font size
            document.body.style.fontSize = RevisionVault.settings.fontSize === 'large' ? '18px' : 
                                         RevisionVault.settings.fontSize === 'small' ? '14px' : '16px';
        }

        function toggleDarkMode() {
            if (document.body.classList.contains('dark-mode')) {
                disableDarkMode();
            } else {
                enableDarkMode();
            }
        }

        function enableDarkMode() {
            document.body.classList.add('dark-mode');
            RevisionVault.settings.theme = 'dark';
            saveSettings();
        }

        function disableDarkMode() {
            document.body.classList.remove('dark-mode');
            RevisionVault.settings.theme = 'light';
            saveSettings();
        }

        function toggleHighContrast() {
            if (RevisionVault.settings.accessibility.highContrast) {
                disableHighContrast();
            } else {
                enableHighContrast();
            }
        }

        function enableHighContrast() {
            document.body.style.filter = 'contrast(1.4)';
            RevisionVault.settings.accessibility.highContrast = true;
            saveSettings();
        }

        function disableHighContrast() {
            document.body.style.filter = 'contrast(1)';
            RevisionVault.settings.accessibility.highContrast = false;
            saveSettings();
        }

        function increaseFontSize() {
            const sizes = ['small', 'medium', 'large'];
            const current = RevisionVault.settings.fontSize;
            const index = sizes.indexOf(current);
            
            if (index < sizes.length - 1) {
                RevisionVault.settings.fontSize = sizes[index + 1];
                document.body.style.fontSize = sizes[index + 1] === 'large' ? '18px' : '16px';
                saveSettings();
            }
        }

        function decreaseFontSize() {
            const sizes = ['small', 'medium', 'large'];
            const current = RevisionVault.settings.fontSize;
            const index = sizes.indexOf(current);
            
            if (index > 0) {
                RevisionVault.settings.fontSize = sizes[index - 1];
                document.body.style.fontSize = sizes[index - 1] === 'small' ? '14px' : '16px';
                saveSettings();
            }
        }

        // ==================== UTILITY FUNCTIONS ====================
        function showLoading(message) {
            const loading = document.createElement('div');
            loading.id = 'loadingOverlay';
            loading.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                right: 0;
                bottom: 0;
                background: rgba(0,0,0,0.8);
                display: flex;
                flex-direction: column;
                align-items: center;
                justify-content: center;
                color: white;
                z-index: 3000;
            `;
            loading.innerHTML = `
                <div class="loading-spinner"></div>
                <p style="margin-top: 20px;">${message || 'Loading...'}</p>
            `;
            document.body.appendChild(loading);
        }

        function hideLoading() {
            const loading = document.getElementById('loadingOverlay');
            if (loading) loading.remove();
        }

        function debounce(func, wait) {
            let timeout;
            return function executedFunction(...args) {
                const later = () => {
                    clearTimeout(timeout);
                    func(...args);
                };
                clearTimeout(timeout);
                timeout = setTimeout(later, wait);
            };
        }

        function openModal(modalId) {
            document.getElementById(modalId).classList.add('active');
            document.body.style.overflow = 'hidden';
        }

        function closeModal(modalId) {
            document.getElementById(modalId).classList.remove('active');
            document.body.style.overflow = 'auto';
        }

        function switchTab(tabName) {
            // Update active tab
            document.querySelectorAll('.tab').forEach(tab => {
                tab.classList.remove('active');
            });
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.remove('active');
            });
            
            // Activate selected tab
            event.target.classList.add('active');
            document.getElementById(tabName).classList.add('active');
            
            // Update navigation buttons
            document.querySelectorAll('.nav-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            
            // Update current view
            RevisionVault.currentView = tabName;
        }

        function saveSettings() {
            localStorage.setItem('rvp_settings', JSON.stringify(RevisionVault.settings));
        }

        function saveAnalytics() {
            localStorage.setItem('rvp_analytics', JSON.stringify(RevisionVault.analytics));
        }

        // ==================== CLOUD SYNC ====================
        async function syncWithCloud() {
            if (!RevisionVault.cloud.enabled) return;
            
            try {
                // Simulate cloud sync
                console.log('Syncing with cloud...');
                
                // Update last sync time
                RevisionVault.cloud.lastSync = new Date().toISOString();
                document.getElementById('cloudStatus').innerHTML = `
                    <i class="fas fa-cloud"></i>
                    <span>Synced ${new Date().toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'})}</span>
                `;
            } catch (error) {
                console.error('Cloud sync failed:', error);
                document.getElementById('cloudStatus').innerHTML = `
                    <i class="fas fa-cloud"></i>
                    <span>Offline</span>
                `;
                document.getElementById('cloudStatus').classList.add('offline');
            }
        }

        // ==================== PWA INSTALLATION ====================
        let deferredPrompt;

        window.addEventListener('beforeinstallprompt', (e) => {
            // Prevent Chrome 67 and earlier from automatically showing the prompt
            e.preventDefault();
            // Stash the event so it can be triggered later
            deferredPrompt = e;
            // Show install banner
            document.getElementById('pwaBanner').classList.add('show');
        });

        function installPWA() {
            if (deferredPrompt) {
                deferredPrompt.prompt();
                deferredPrompt.userChoice.then((choiceResult) => {
                    if (choiceResult.outcome === 'accepted') {
                        console.log('User accepted the install prompt');
                    }
                    deferredPrompt = null;
                });
            }
            document.getElementById('pwaBanner').classList.remove('show');
        }

        // ==================== STUDY TIMER ====================
        function startStudySession() {
            const timer = document.getElementById('studyTimer');
            timer.classList.add('active');
            startTimer();
        }

        function startTimer() {
            RevisionVault.studyTimer.active = true;
            RevisionVault.studyTimer.startTime = Date.now();
            RevisionVault.studyTimer.remaining = RevisionVault.studyTimer.duration;
            
            updateTimerDisplay();
            RevisionVault.timerInterval = setInterval(updateTimer, 1000);
        }

        function updateTimer() {
            if (!RevisionVault.studyTimer.active) return;
            
            const elapsed = Date.now() - RevisionVault.studyTimer.startTime;
            RevisionVault.studyTimer.remaining = Math.max(0, RevisionVault.studyTimer.duration - elapsed);
            
            updateTimerDisplay();
            
            if (RevisionVault.studyTimer.remaining <= 0) {
                stopTimer();
                showNotification('Study Session Complete', 'Great job! Take a break.', 'success');
            }
        }

        function updateTimerDisplay() {
            const minutes = Math.floor(RevisionVault.studyTimer.remaining / 60000);
            const seconds = Math.floor((RevisionVault.studyTimer.remaining % 60000) / 1000);
            document.getElementById('timerDisplay').textContent = 
                `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
        }

        function stopTimer() {
            RevisionVault.studyTimer.active = false;
            clearInterval(RevisionVault.timerInterval);
            
            // Record study session
            const minutes = RevisionVault.studyTimer.duration / 60000;
            RevisionVault.analytics.studyHours += minutes / 60;
            saveAnalytics();
            
            // Hide timer
            document.getElementById('studyTimer').classList.remove('active');
        }

        // ==================== EVENT LISTENERS ====================
        function setupEventListeners() {
            // Online/offline detection
            window.addEventListener('online', () => {
                showNotification('Back Online', 'Syncing your data...', 'success');
                syncWithCloud();
            });
            
            window.addEventListener('offline', () => {
                showNotification('Offline Mode', 'Working offline. Changes will sync when you reconnect.', 'warning');
                document.getElementById('cloudStatus').classList.add('offline');
            });
            
            // Visibility change
            document.addEventListener('visibilitychange', () => {
                if (document.hidden) {
                    // App is hidden
                    if (RevisionVault.studyTimer.active) {
                        // Pause timer if needed
                    }
                } else {
                    // App is visible again
                }
            });
            
            // Keyboard shortcuts
            document.addEventListener('keydown', (e) => {
                // Ctrl/Cmd + F for search
                if ((e.ctrlKey || e.metaKey) && e.key === 'f') {
                    e.preventDefault();
                    document.getElementById('intelliSearch').focus();
                }
                
                // Escape to close modals
                if (e.key === 'Escape') {
                    closeAllModals();
                }
            });
        }

        function closeAllModals() {
            document.querySelectorAll('.modal.active').forEach(modal => {
                modal.classList.remove('active');
            });
            document.body.style.overflow = 'auto';
        }

        // ==================== INITIALIZATION COMPLETION ====================
        function checkFirstTimeUser() {
            const firstTime = !localStorage.getItem('rvp_first_time');
            
            if (firstTime) {
                localStorage.setItem('rvp_first_time', 'false');
                startFeatureTour();
            }
        }

        function startFeatureTour() {
            openModal('featureTour');
            
            const tourSteps = [
                {
                    title: "Welcome to RevisionVault Pro 2.0!",
                    content: "Let me show you around your new intelligent academic platform."
                },
                {
                    title: "SmartStudy Library",
                    content: "Access thousands of study materials with our AI-powered search."
                },
                {
                    title: "AI Assistant",
                    content: "Get instant help with essays, research, and study questions."
                },
                {
                    title: "Study Tools",
                    content: "Use flashcards, quizzes, and progress tracking to enhance your learning."
                }
            ];
            
            RevisionVault.tourSteps = tourSteps;
            RevisionVault.currentTourStep = 0;
            showTourStep(0);
        }

        function showTourStep(step) {
            const stepData = RevisionVault.tourSteps[step];
            if (!stepData) return;
            
            document.getElementById('tourContent').innerHTML = `
                <h3>${stepData.title}</h3>
                <p>${stepData.content}</p>
                <div style="text-align: center; margin: 20px 0;">
                    <div style="display: inline-flex; gap: 5px;">
                        ${RevisionVault.tourSteps.map((_, i) => `
                            <div style="width: 10px; height: 10px; border-radius: 50%; background: ${i === step ? 'var(--primary)' : '#e2e8f0'};"></div>
                        `).join('')}
                    </div>
                </div>
            `;
        }

        function nextTourStep() {
            RevisionVault.currentTourStep++;
            if (RevisionVault.currentTourStep >= RevisionVault.tourSteps.length) {
                closeModal('featureTour');
            } else {
                showTourStep(RevisionVault.currentTourStep);
            }
        }

        function skipTour() {
            closeModal('featureTour');
        }

        // ==================== START BACKGROUND SERVICES ====================
        function startBackgroundServices() {
            // Auto-save every 30 seconds
            setInterval(() => {
                if (RevisionVault.settings.autoSave) {
                    autoSave();
                }
            }, 30000);
            
            // Auto-sync every 60 seconds if online
            setInterval(() => {
                if (RevisionVault.cloud.enabled && navigator.onLine) {
                    syncWithCloud();
                }
            }, 60000);
            
            // Update live metrics every 10 seconds
            setInterval(updateDashboardMetrics, 10000);
        }

        function autoSave() {
            // Save all data to localStorage
            localStorage.setItem('rvp_documents', JSON.stringify(RevisionVault.documents));
            localStorage.setItem('rvp_universities', JSON.stringify(RevisionVault.universities));
            localStorage.setItem('rvp_settings', JSON.stringify(RevisionVault.settings));
            localStorage.setItem('rvp_analytics', JSON.stringify(RevisionVault.analytics));
            
            console.log('Auto-save completed');
        }

        // ==================== HELPER FUNCTIONS ====================
        function getDocIcon(type) {
            const icons = {
                pdf: 'file-pdf',
                doc: 'file-word',
                ppt: 'file-powerpoint',
                video: 'file-video',
                audio: 'file-audio',
                image: 'file-image',
                default: 'file'
            };
            return icons[type] || icons.default;
        }

        function addChatMessage(sender, message) {
            const messagesDiv = document.getElementById('aiChatMessages');
            const messageDiv = document.createElement('div');
            messageDiv.className = `chat-message ${sender}`;
            messageDiv.innerHTML = `
                <div style="display: flex; gap: 10px; margin-bottom: 15px;">
                    <div style="width: 30px; height: 30px; border-radius: 50%; background: ${sender === 'user' ? 'var(--primary)' : 'var(--accent)'}; display: flex; align-items: center; justify-content: center; color: white;">
                        <i class="fas fa-${sender === 'user' ? 'user' : 'robot'}"></i>
                    </div>
                    <div style="flex: 1;">
                        <div style="font-weight: 600; margin-bottom: 5px;">${sender === 'user' ? 'You' : 'AI Assistant'}</div>
                        <div style="background: ${sender === 'user' ? '#e0f2fe' : '#f1f5f9'}; padding: 10px; border-radius: 10px;">
                            ${message}
                        </div>
                    </div>
                </div>
            `;
            messagesDiv.appendChild(messageDiv);
            messagesDiv.scrollTop = messagesDiv.scrollHeight;
        }

        function showTypingIndicator() {
            const messagesDiv = document.getElementById('aiChatMessages');
            const indicator = document.createElement('div');
            indicator.id = 'typingIndicator';
            indicator.innerHTML = `
                <div style="display: flex; gap: 10px; margin-bottom: 15px;">
                    <div style="width: 30px; height: 30px; border-radius: 50%; background: var(--accent); display: flex; align-items: center; justify-content: center; color: white;">
                        <i class="fas fa-robot"></i>
                    </div>
                    <div style="flex: 1;">
                        <div style="font-weight: 600; margin-bottom: 5px;">AI Assistant</div>
                        <div style="background: #f1f5f9; padding: 10px; border-radius: 10px; display: flex; gap: 5px;">
                            <div style="width: 8px; height: 8px; border-radius: 50%; background: #64748b; animation: pulse 1s infinite;"></div>
                            <div style="width: 8px; height: 8px; border-radius: 50%; background: #64748b; animation: pulse 1s infinite 0.2s;"></div>
                            <div style="width: 8px; height: 8px; border-radius: 50%; background: #64748b; animation: pulse 1s infinite 0.4s;"></div>
                        </div>
                    </div>
                </div>
            `;
            messagesDiv.appendChild(indicator);
            messagesDiv.scrollTop = messagesDiv.scrollHeight;
        }

        function removeTypingIndicator() {
            const indicator = document.getElementById('typingIndicator');
            if (indicator) indicator.remove();
        }

        // ==================== API INTEGRATION PLACEHOLDERS ====================
        async function initializeAI() {
            // Initialize AI models and knowledge base
            console.log('Initializing AI system...');
        }

        async function getAISearchSuggestions(query) {
            // This would connect to AI backend
            return ["Try searching for specific unit codes", "Looking for study materials?", "Need help with a particular subject?"];
        }

        async function syncDocumentToCloud(document) {
            // This would sync to cloud storage
            console.log('Syncing document to cloud:', document.id);
            return true;
        }

        async function checkForUpdates() {
            // Check for app updates
            console.log('Checking for updates...');
        }

        // ==================== EXPORT FUNCTIONS FOR GLOBAL ACCESS ====================
        window.openAIAssistant = openAIAssistant;
        window.openDocumentUpload = openDocumentUpload;
        window.openTool = openTool;
        window.switchTab = switchTab;
        window.startStudySession = startStudySession;
        window.startTimer = startTimer;
        window.stopTimer = stopTimer;
        window.flipCard = flipCard;
        window.nextCard = nextCard;
        window.askAIQuestion = askAIQuestion;
        window.toggleDarkMode = toggleDarkMode;
        window.increaseFontSize = increaseFontSize;
        window.decreaseFontSize = decreaseFontSize;
        window.toggleHighContrast = toggleHighContrast;
        window.installPWA = installPWA;
        window.nextTourStep = nextTourStep;
        window.skipTour = skipTour;
        window.closeModal = closeModal;

        console.log('RevisionVault Pro 2.0 - All systems initialized successfully!');
    </script>
</body>
</html>